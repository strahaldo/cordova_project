<div ng-controller="editCtrlPiste">
    <ons-page  var="myNavigator">
        <ons-toolbar class ="toolbar-header">
            <div class="left">
                <ons-back-button ui-sref="plannerPiste.plan"></ons-back-button>
            </div>
            <div class="toolbar-center center">{{title}}</div>
            <div class="right">

            </div>
        </ons-toolbar>
        <ons-list style="margin: -1px 0" >

            <ons-list-header style="text-align: center; padding-top: 10px;" class="center">
                <p style="font-size: larger;">Valitut kortit <span style="color: cornflowerblue;">{{title}}</span></p>
            </ons-list-header>
            <form id="planner-form">
                <div class="container">
                    <div class="main">
                        <div ng-repeat="image in titPiste | unique : 'c_id'">
                            <ons-button modifier="large--cta" style="font-size: larger;">{{image.title}}</ons-button>
                            <br/>
                        </div>


                        <div id="new">
                        </div>

                        <ons-list-header style="text-align: center; padding-top: 10px;" class="center">
                            <p style="font-size: larger;">Lisää uusia harjoitteita</p>
                        </ons-list-header>
                    <div style="background-color: inherit; position:relative;
                            text-align: center; margin-top: 20px; padding-bottom: 20px;">
                        <input type="submit"  ng-click ="editPlan()" class="button" value="Päivitä" />
                    </div>
                        <ul class="item-list">
                            <li ng-repeat="image in imagesPiste  | filter : {p_id : image.p_id} | orderBy:'p_id'"
                                ng-click="editImage(image) "
                                ng-class="{ 'selected-image': image.selected }"
                                ng-value="true">
                                <div class="list__header" ng-hide="image.title !== 'Pelaa Pistemestaria'" style="color :#A3A5A8;
                                      border-radius: 5px; margin-bottom: 3px;">
                                    Pelaa Pistemestaria
                                </div>
                                <div class="list__header" style="color :#A3A5A8; border-radius: 5px; margin-bottom: 3px;" ng-repeat="sec in sectionPiste | filter : {p_id : image.p_id} ">
                                    {{sec.title}}
                                </div>
                                <div class="item" ng-show="image.title == 'Pelaa Pistemestaria'">
                                <img ng-src="{{image.image_dir}}" class="thumbnailThumb">

                                <p class="moduleTitle">{{image.title}}</p>
                                </div>
<!--                                 <div class="cardButton" ng-hide="image.title == 'Pelaa Pistemestaria'">
                                    <img  ng-src="cdvfile://localhost/persistent/sabamestari/.images/pistemestari/{{image.image_name}}"
                                    fallback-src="" class="thumbnailThumb" ng-hide="image.image_dir == ''">
                                    <p class="moduleTitle">{{image.title}}</p>
                                </div> -->
                                <div class="item" ng-hide="image.title == 'Pelaa Pistemestaria'">
                                    <img  ng-src="cdvfile://localhost/persistent/sabamestari/.images/pistemestari/{{image.image_name}}"
                                          class="thumbnailThumb"
                                        fallback-src="" ng-hide="image.image_dir == ''"
                                        fallback-src="{{image.image_dir}}">
                                    <span class="caption">{{image.title}}</span>
                                </div>
                            </li>


                            <!-- Backup-->
                             <li ng-show="{{ images == undefined}}" ng-repeat="image in backupImages  | filter : {p_id : image.p_id} | filter:secSearch | orderBy:'p_id'"
                                ng-click="editImage(image) "
                                ng-class="{ 'selected-image': image.selected }"
                                ng-value="true">
                                <div class="list__header" ng-hide="image.title !== 'Pelaa Pistemestaria'" style="color :#A3A5A8;
                                border-radius: 5px; margin-bottom: 3px;">
                                Pelaa Pistemestaria
                                </div>
                                <div class="list__header" style="color :#A3A5A8;
                                                    border-radius: 5px; margin-bottom: 3px;" ng-repeat="sec in section | filter : {p_id : image.p_id} ">
                                    {{sec.title}}

                                </div>
<!--                                 <div class="cardButton">
                                    <img  ng-src="{{image.image_dir}}" class="thumbnailThumb" ng-hide="image.image_dir == ''">

                                    <p>{{image.title}}</p>
                                </div> -->
                                <div class="item">
                                    <img  ng-src="{{image.image_dir}}"
                                    class="thumbnailThumb"
                                    ng-hide="image.image_dir == ''">
                                    <span class="caption">{{image.title}}</span>
                                </div>
                            </li>






                        </ul>
                    </div>
                    <div style="background-color: inherit; position:relative;
                            text-align: center; margin-top: 20px; padding-bottom: 20px;">
                        <input type="submit"  ng-click ="editPlan()" class="button" value="Päivitä" />
                    </div>
                </div>
            </form>
        </ons-list>
    </ons-page>
</div>